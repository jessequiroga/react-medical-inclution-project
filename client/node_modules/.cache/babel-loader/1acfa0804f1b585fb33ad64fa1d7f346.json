{"ast":null,"code":"import _regeneratorRuntime from\"/Users/etl/Documents/react-medical-inclution-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/etl/Documents/react-medical-inclution-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/etl/Documents/react-medical-inclution-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import{useHistory}from\"react-router-dom\";import{makeStyles}from'@material-ui/core/styles';import Axios from'axios';import UserContext from'../context/UserContext';import{useTranslation}from'react-i18next';import FormControl from'@material-ui/core/FormControl';import InputLabel from'@material-ui/core/InputLabel';import Input from'@material-ui/core/Input';import Grid from'@material-ui/core/Grid';import Errormsg from'./errormsg';import Nav from\"../nav\";var useStyles=makeStyles(function(theme){return{button:{margin:\"14px\",color:\"black\",fontSize:\"16px\",backgroundColor:\"#57EBEB\",minHeight:\"75px\",minWidth:\"200px !important\",borderRadius:\"46px\"},labelAligne:{textAlign:\"left\",marginLeft:16},paper:{padding:theme.spacing(2),textAlign:'center',color:'white',backgroundColor:'#eb57577a'},content:{paddingBottom:\"600px\",paddingTop:\"39px\"}};});export default function Login1(){var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var classes=useStyles();var _useState=useState(),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useContext=useContext(UserContext),setUserData=_useContext.setUserData;var history=useHistory();var submit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var loginUser,loginRes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;loginUser={email:email,password:password};_context.next=5;return Axios.post(\"http://localhost:3001/user/login\",loginUser);case 5:loginRes=_context.sent;setUserData({token:loginRes.data.token,user:loginRes.data.user});localStorage.setItem(\"auth-token\",loginRes.data.token);history.push(\"/homepage\");//window.location = '/homepage';\n_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);_context.t0.response.data.msg&&setError(_context.t0.response.data.msg);case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function submit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(Nav,null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Grid,{className:classes.labelAligne,item:true,xs:12},/*#__PURE__*/React.createElement(\"h3\",{className:\"form\",style:{textAlign:\"center\",width:700,backgroundColor:\"#f18888\",color:\"white\",borderRadius:5,height:53}},t('registration.login')),error&&/*#__PURE__*/React.createElement(Errormsg,{message:error,clearError:function clearError(){return setError(undefined);}}),/*#__PURE__*/React.createElement(\"form\",{className:\"form\",onSubmit:submit},/*#__PURE__*/React.createElement(FormControl,{className:\"\"},/*#__PURE__*/React.createElement(InputLabel,{htmlFor:\"login-email\"},t('registration.email')),/*#__PURE__*/React.createElement(Input,{id:\"login-email\",type:\"email\",onChange:function onChange(e){return setEmail(e.target.value);}})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(FormControl,{className:\"\"},/*#__PURE__*/React.createElement(InputLabel,{htmlFor:\"login-password\"},t('registration.password')),/*#__PURE__*/React.createElement(Input,{id:\"login-password\",type:\"password\",onChange:function onChange(e){return setPassword(e.target.value);}})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Submit\"}))));}","map":{"version":3,"sources":["/Users/etl/Documents/react-medical-inclution-project/src/components/auth/login1.js"],"names":["React","useState","useContext","useHistory","makeStyles","Axios","UserContext","useTranslation","FormControl","InputLabel","Input","Grid","Errormsg","Nav","useStyles","theme","button","margin","color","fontSize","backgroundColor","minHeight","minWidth","borderRadius","labelAligne","textAlign","marginLeft","paper","padding","spacing","content","paddingBottom","paddingTop","Login1","t","i18n","classes","email","setEmail","password","setPassword","error","setError","setUserData","history","submit","e","preventDefault","loginUser","post","loginRes","token","data","user","localStorage","setItem","push","response","msg","width","height","undefined","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport Axios from 'axios';\nimport UserContext from '../context/UserContext';\nimport { useTranslation } from 'react-i18next';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport Grid from '@material-ui/core/Grid';\nimport Errormsg from './errormsg';\nimport Nav from \"../nav\";\n\nconst useStyles = makeStyles((theme) => ({\n    button: {\n        margin: \"14px\",\n        color: \"black\",\n        fontSize: \"16px\",\n        backgroundColor: \"#57EBEB\",\n        minHeight: \"75px\",\n        minWidth: \"200px !important\",\n        borderRadius: \"46px\"\n    },\n    labelAligne: {\n        textAlign: \"left\",\n        marginLeft: 16\n    },\n    paper: {\n        padding: theme.spacing(2),\n        textAlign: 'center',\n        color: 'white',\n        backgroundColor: '#eb57577a',\n    },\n    content: {\n        paddingBottom: \"600px\",\n        paddingTop: \"39px\",\n\n    }\n}));\n\nexport default function Login1() {\n    const { t, i18n } = useTranslation();\n    const classes = useStyles();\n    const [email, setEmail] = useState();\n    const [password, setPassword] = useState();\n    const [error, setError] = useState(\"\");\n\n    const { setUserData } = useContext(UserContext);\n    const history = useHistory();\n\n    const submit = async (e) =>{\n        e.preventDefault();\n        try{\n        const loginUser = {email, password};\n        const loginRes = await Axios.post(\n            \"http://localhost:3001/user/login\",\n            loginUser\n            );\n           \n        setUserData({\n            token: loginRes.data.token,\n            user: loginRes.data.user,\n        });\n        localStorage.setItem(\"auth-token\", loginRes.data.token);\n        history.push(\"/homepage\");\n        //window.location = '/homepage';\n    } catch (err) {\n        err.response.data.msg && setError(err.response.data.msg);\n    }\n        \n    }\n    return (\n        <div className=\"container\">\n            <Nav />\n      <br/>\n           <Grid className={classes.labelAligne} item xs={12}>\n               <h3 className=\"form\" style={{ textAlign: \"center\", width:700, backgroundColor:\"#f18888\", color:\"white\", borderRadius:5, height:53 }}>{t('registration.login')}</h3>\n               {error && (\n                <Errormsg message={error} clearError={() => setError(undefined)} />\n                )}\n              <form className=\"form\" onSubmit={submit}>\n               <FormControl  className=''>\n                   <InputLabel htmlFor=\"login-email\">{t('registration.email')}</InputLabel>\n                   <Input\n                       id=\"login-email\"\n                       type=\"email\"\n                       onChange={(e) => setEmail(e.target.value)}\n                   />\n               </FormControl>\n                <br/>\n               <FormControl  className=''>\n                   <InputLabel htmlFor=\"login-password\">{t('registration.password')}</InputLabel>\n                   <Input\n                       id=\"login-password\"\n                       type=\"password\"\n                       onChange={(e) => setPassword(e.target.value)}\n                   />\n               </FormControl>\n                <br/>\n       <input type=\"submit\" value=\"Submit\" />\n               </form>\n           </Grid>\n   </div>\n    )\n}\n\n"]},"metadata":{},"sourceType":"module"}